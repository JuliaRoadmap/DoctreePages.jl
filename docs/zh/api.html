<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>中文文档/API 参考 - DoctreePages</title>
	<meta name="tURL" id="tURL" content="../../">
	<meta name="description" content="中文文档/API 参考 - DoctreePages">
	<script src="../../extra/info.js"></script>
	<link id="theme-href" rel="stylesheet" type="text/css" href="../../css/light.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../extra/main.js"></script>
	<link rel="stylesheet" type="text/css" href="../../css/general.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/solid.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/brands.min.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.css">
</head>
<body>
	<div id="documenter">
		<nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">DoctreePages</span></div><ul class="docs-menu"></ul></nav>
		<div class="docs-main">
			<header class="docs-navbar">
				<nav class="breadcrumb"><ul><li class="is-active">中文文档 / API 参考</li></ul></nav>
				<div class="docs-right"><a class='docs-edit-link' href='https://github.com/JuliaRoadmap/DoctreePages.jl/tree/master/docs/zh/api.md' target='_blank'><span class='docs-label is-hidden-touch'>编辑此页面</span></a>
					<a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="设置"></a>
					<a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a>
				</div>
			</header>
			<article class="content"><h1 id='header-api-参考'>API 参考<a class='docs-heading-anchor-permalink'></a></h1><p>除特殊注明外，除非改变主版本号，以下功能均会被维护。</p><h2 id='header-设置结构'>设置结构<a class='docs-heading-anchor-permalink'></a></h2><p><code>GiscusSetting</code>、<code>MainScriptSetting</code>、<code>PageSetting</code>、<code>PageSetting</code> 设置结构主要用于传参。</p><p><code>default_parser()</code> 可生成支持恰当多功能的 Markdown 解析器，该解析器来自 CommonMark 包。</p><h2 id='header-文档树结构'>文档树结构<a class='docs-heading-anchor-permalink'></a></h2><p>基本的文件信息类型名为 <code>FileBase</code>，包含以下字段</p><table><thead><tr><th style='float:center'>字段名</th><th style='float:center'>类型限制  作用</th><th style='float:left'></th></tr></thead><tbody><tr><td style='float:center'><code>is_outlined</code></td><td style='float:center'><code>Bool</code></td><td style='float:center'>标记是否在提纲中</td></tr><tr><td style='float:center'><code>generated</code></td><td style='float:center'><code>Bool</code></td><td style='float:center'><code>make_rec</code> 检测为否则进行「标准单文档框架」包裹</td></tr><tr><td style='float:center'><code>parent</code></td><td style='float:center'><code>Int</code></td><td style='float:center'>父母节点的索引</td></tr><tr><td style='float:center'><code> name</code></td><td style='float:center'><code>String</code></td><td style='float:center'>去掉后缀的文件名</td></tr><tr><td style='float:center'><code>suffix</code></td><td style='float:center'><code>String</code></td><td style='float:center'>文件后缀</td></tr><tr><td style='float:center'><code>title</code></td><td style='float:center'><code>String</code></td><td style='float:center'>标题</td></tr><tr><td style='float:center'><code>target</code></td><td style='float:center'><code>String</code></td><td style='float:center'>目标文件名（包括后缀）</td></tr><tr><td style='float:center'><code>data</code></td><td style='float:center'><code>String</code></td><td style='float:center'>文本数据</td></tr></tbody></table><p>基本的目录信息类型名为 <code>DirBase</code>，包含以下字段</p><table><thead><tr><th style='float:center'>字段名</th><th style='float:center'>类型限制  作用</th><th style='float:left'></th></tr></thead><tbody><tr><td style='float:center'><code>is_outlined</code></td><td style='float:center'><code>Bool</code></td><td style='float:center'>标记是否在提纲中</td></tr><tr><td style='float:center'><code>parent</code></td><td style='float:center'><code>Int</code></td><td style='float:center'>父母节点的索引</td></tr><tr><td style='float:center'><code> name</code></td><td style='float:center'><code>String</code></td><td style='float:center'>去掉后缀的文件名</td></tr><tr><td style='float:center'><code>title</code></td><td style='float:center'><code>String</code></td><td style='float:center'>标题</td></tr><tr><td style='float:center'><code>children</code></td><td style='float:center'>/</td><td style='float:center'>暂不维护</td></tr><tr><td style='float:center'><code>setting</code></td><td style='float:center'><code>Dict</code></td><td style='float:center'>设置文件的内容</td></tr></tbody></table><h2 id='header-markdown-处理'>Markdown 处理<a class='docs-heading-anchor-permalink'></a></h2><p><code>ify_md</code> 原型 <code>ify_md(s::AbstractString, pss::PagesSetting, accept_crlf::Bool = true)</code>，直接将 Markdown 格式的文本 <code>s</code> 转为 HTML。</p><p><code>childrenhtml</code> 原型 <code>childrenhtml(node::CommonMark.Node, pss::PagesSetting)</code> 用于辅助，对 <code>node</code> 所有子节点应用 <code>mkhtml</code> 并合并。</p><p><code>mkhtml</code> 原型 <code>mkhtml(node::CommonMark.Node, c::CommonMark.AbstractContainer, pss::PagesSetting)</code>，用于对 <code>node</code> 数据（递归地）生成 HTML。其中 <code>c</code> 等于 <code>node.t</code>，用于派发。</p><h3 id='header-代码块处理'>代码块处理<a class='docs-heading-anchor-permalink'></a></h3><p><code>highlight</code> 一个原型是 <code>highlight(language::AbstractString, code::AbstractString, pss::PagesSetting)</code>，对于一个代码块，<code>code</code> 为内部内容，<code>language</code> 为标题，调用此函数转为 HTML。另一个原型是 <code>highlight(::Val, code::AbstractString, pss::PagesSetting, args)</code> 用于对于指定类型的代码块生成 HTML。第一个参数用于派发，等于 <code>args[1]</code>，<code>args</code> 是原标题解析后得到的。</p><p><code>highlight_directly</code> 原型 <code>highlight_directly(language, code::AbstractString, pss::PagesSetting)</code>，用于对无需解析标题的代码块调用恰当的 <code>highlight</code>（Ⅱ）方法。</p><h2 id='header-生成单个文档-html'>生成单个文档 HTML<a class='docs-heading-anchor-permalink'></a></h2><p><code>makehtml</code> 原型 <code>makehtml(pss::PagesSetting, ps::PageSetting)</code>，用于生成单个文档 HTML。嵌入模板中的 HTML 作为 <code>ps.mds</code> 传参。</p><h2 id='header-主流程'>主流程<a class='docs-heading-anchor-permalink'></a></h2><p><code>generate</code> 是文档生成的最顶级功能函数，原型是 <code>generate(srcdir::AbstractString, tardir::AbstractString, build_setting::AbstractString = "DoctreeBuild.toml")</code> 与 <code>generate(srcdir::AbstractString, tardir::AbstractString, pss::PagesSetting)</code>：将 <code>srcdir</code> 目录下文档的生成结果置于 <code>tardir</code> 下。它会调用 <code>@info</code> 显示提示信息。</p><p><code>scan_rec</code> 是文档生成时的递归扫描函数，会将信息载入 <code>Doctree</code> 结构，并调用 <code>filedeal</code> 进行预处理。原型是 <code>scan_rec(tree::Doctree, pss::PagesSetting; outlined::Bool, path::String, pathv::Vector{String})</code>。</p><p><code>make_rec</code> 是文档生成时的递归处理函数，会读取 <code>Doctree</code> 内容，递归地给预处理得到的 HTML 套壳（包括生成前后篇箭头）。原型是 <code>make_rec(tree::Doctree, pss::PagesSetting; path::String, pathv::Vector{String})</code>。</p><h2 id='header-单文件生成'>单文件生成<a class='docs-heading-anchor-permalink'></a></h2><p><code>filedeal</code> 是单个文件的处理函数，原型是 <code>filedeal(::Val; fbase::FileBase, method::Symbol, pss::PagesSetting)</code>。第一个参数是文件后缀，函数借此进行派发。若函数自身只是进行预处理，需把数据置于 <code>fbase.data</code> 中并设置 <code>fbase.target</code>，若进行了完全处理，应设置 <code>fbase.generated = true</code>。</p><h2 id='header-操作辅助'>操作辅助<a class='docs-heading-anchor-permalink'></a></h2><p><code>github_action</code> 原型 <code>github_action(setting::Union{AbstractString, PagesSetting} = "DoctreeBuild.toml")</code>，用于配合 <code>peaceiris/actions-gh-pages</code> 直接在 Github Action 脚本中调用生成功能。</p><p><code>template</code> 原型 <code>template(;print_help::Bool = true)</code>，用于生成文档模板（包含 Github Action 脚本）。</p><div id='rocket' onclick='boom()'></div></article>
			<nav class="docs-footer"><a class='docs-footer-prevpage' href='frame.html'>« 标准单文档框架</a><div class='flexbox-break'></div><p class='footer-message'>Powered by <a href='https://github.com/JuliaRoadmap/DoctreePages.jl'>DoctreePages.jl</a> and its dependencies.</p></nav>
			
		</div>
	</div>
</body>
</html>
